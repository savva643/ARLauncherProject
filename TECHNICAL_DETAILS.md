# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### SensorConnector
- **–Ø–∑—ã–∫**: C++17
- **–§—Ä–µ–π–º–≤–æ—Ä–∫**: Qt 5/6 (core, network, concurrent)
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏**:
  - libjpeg-turbo - JPEG –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
  - FFmpeg - H.264 –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
  - Qt Network - TCP/UDP —Å–µ—Ä–≤–µ—Ä—ã
  - Qt Concurrent - –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å

### LensEngineSDK
- **–Ø–∑—ã–∫**: C++17 (—á–∏—Å—Ç—ã–π C++, –±–µ–∑ Qt)
- **–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞**: GLM
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏**:
  - GLM - –≤–µ–∫—Ç–æ—Ä—ã, –º–∞—Ç—Ä–∏—Ü—ã, –∫–≤–∞—Ç–µ—Ä–Ω–∏–æ–Ω—ã
  - OpenCV (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - feature detection
  - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ C++

### ARLauncher
- **–Ø–∑—ã–∫**: C++17
- **–û–∫–Ω–æ**: GLFW3
- **–†–µ–Ω–¥–µ—Ä–∏–Ω–≥**: Vulkan/OpenGL
- **–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞**: GLM
- **UI**: –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–Ω–µ ImGui)

## üìê –°–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

### –õ–µ–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏—Å—Ç–µ–º–∞ (–∫–∞–∫ ARKit)

```
    Y (–≤–≤–µ—Ä—Ö)
    |
    |
    +--- X (–≤–ø—Ä–∞–≤–æ)
   /
  /
 Z (–æ—Ç –∫–∞–º–µ—Ä—ã)
```

- **X**: –≤–ø—Ä–∞–≤–æ
- **Y**: –≤–≤–µ—Ä—Ö
- **Z**: –æ—Ç –∫–∞–º–µ—Ä—ã (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)

### –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

- **–ü–æ–∑–∏—Ü–∏—è –∫–∞–º–µ—Ä—ã**: `glm::vec3`
- **–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è**: `glm::quat`
- **–ú–∞—Ç—Ä–∏—Ü—ã**: `glm::mat4`
- **View Matrix**: `rotation * translation`
- **Projection Matrix**: `glm::perspective`

## üéØ –ü—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö

### –§–æ—Ä–º–∞—Ç –ø–∞–∫–µ—Ç–∞ (TCP/UDP/USB)

```
[Header: 1 byte type]
[Sequence: 8 bytes big-endian]
[Size: 4 bytes big-endian]
[Data: N bytes]
```

### –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

| –¢–∏–ø | ID | –†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----|---------------|----------|
| RGB Camera | 0x01 | ~100-500 KB | JPEG —Å–∂–∞—Ç–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ |
| LiDAR Depth | 0x02 | 256x192x4 bytes | –ö–∞—Ä—Ç–∞ –≥–ª—É–±–∏–Ω—ã (float) |
| Raw IMU | 0x03 | 80 bytes | IMU –¥–∞–Ω–Ω—ã–µ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞) |
| Feature Points | 0x04 | –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–π | –ú–∞—Å—Å–∏–≤ —Ç–æ—á–µ–∫ |
| Camera Intrinsics | 0x05 | 36 bytes | –ú–∞—Ç—Ä–∏—Ü–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ |
| Light Estimation | 0x06 | ~40 bytes | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Å–≤–µ—â–µ–Ω–∏—è |

## üîÑ –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ (SensorConnector)

```
iPhone ‚Üí USB/WiFi ‚Üí SensorConnector
                      ‚Üì
                  –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ JPEG
                      ‚Üì
                  SensorData (—Å–∏–≥–Ω–∞–ª)
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ (LensEngineSDK)

```
SensorData ‚Üí LensEngineSDK
                ‚Üì
            –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö
                ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚Üì               ‚Üì
    RGB –æ–±—Ä–∞–±–æ—Ç–∫–∞    IMU –æ–±—Ä–∞–±–æ—Ç–∫–∞
    Feature Points   EKF —Ñ–∏–ª—å—Ç—Ä
    Light Est.       Camera Pose
        ‚Üì               ‚Üì
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚Üì
        CameraPose (6DoF)
```

### 3. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ (ARLauncher)

```
CameraPose ‚Üí ARLauncher
                ‚Üì
        –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –∫–∞–º–µ—Ä—ã
                ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚Üì               ‚Üì
    –í–∏–¥–µ–æ-—Ñ–æ–Ω      3D –æ–±—ä–µ–∫—Ç—ã
    (RGB –∫–∞–¥—Ä)     (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)
        ‚Üì               ‚Üì
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚Üì
        –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –Ω–∞ —ç–∫—Ä–∞–Ω
```

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **SensorConnector**:
   - –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ JPEG (4 –ø–æ—Ç–æ–∫–∞)
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
   - –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –∫–∞–¥—Ä–æ–≤

2. **LensEngineSDK**:
   - –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π EKF (predictSimple)
   - –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ LiDAR (–∫–∞–∂–¥—ã–π 4-–π –ø–∏–∫—Å–µ–ª—å)
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–¥—Ä–æ–≤ (std::async)

3. **ARLauncher**:
   - –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–µ—Ä (OpenGL/Vulkan)
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã UI
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —à–µ–π–¥–µ—Ä—ã

### –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

- **FPS**: 60 FPS
- **–ó–∞–¥–µ—Ä–∂–∫–∞**: < 50ms
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU**: < 50%
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏**: < 500 MB

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å

### –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **SensorConnector**: Qt —Å–∏–≥–Ω–∞–ª—ã (–ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã)
- **LensEngineSDK**: `std::mutex` –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö
- **ARLauncher**: GLFW callbacks –≤ –≥–ª–∞–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ –±—É—Ñ–µ—Ä–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- Fallback –¥–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (USB/WiFi)
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üìä –§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö

### RGB –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

```cpp
struct RGBImage {
    std::vector<uint8_t> data;  // RGB –¥–∞–Ω–Ω—ã–µ
    uint32_t width;
    uint32_t height;
    uint64_t timestamp;
};
```

### IMU –¥–∞–Ω–Ω—ã–µ

```cpp
struct RawIMUData {
    uint64_t timestamp;
    double accelX, accelY, accelZ;    // m/s¬≤
    double gyroX, gyroY, gyroZ;       // rad/s
    double gravityX, gravityY, gravityZ; // –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π
    double magX, magY, magZ;          // ŒºT
};
```

### Camera Pose

```cpp
struct CameraPose {
    glm::vec3 position;          // –º–µ—Ç—Ä—ã
    glm::quat rotation;          // –∫–≤–∞—Ç–µ—Ä–Ω–∏–æ–Ω
    glm::mat4 viewMatrix;        // –º–∞—Ç—Ä–∏—Ü–∞ –≤–∏–¥–∞
    glm::mat4 projectionMatrix;  // –º–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ü–∏–∏
    float confidence;            // 0-1
    uint64_t timestamp;          // –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã
};
```

## üé® –†–µ–Ω–¥–µ—Ä–∏–Ω–≥

### –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

1. –û—á–∏—Å—Ç–∫–∞ –±—É—Ñ–µ—Ä–∞ (—Ü–≤–µ—Ç + –≥–ª—É–±–∏–Ω–∞)
2. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤–∏–¥–µ–æ-—Ñ–æ–Ω–∞ (RGB –∫–∞–¥—Ä –∫–∞–∫ —Ç–µ–∫—Å—Ç—É—Ä–∞)
3. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ 3D –æ–±—ä–µ–∫—Ç–æ–≤ (—Å –≥–ª—É–±–∏–Ω–æ–π)
4. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ)

### –®–µ–π–¥–µ—Ä—ã

- **–í–∏–¥–µ–æ-—Ñ–æ–Ω**: –ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–≤–∞–¥
- **3D –æ–±—ä–µ–∫—Ç—ã**: Phong –æ—Å–≤–µ—â–µ–Ω–∏–µ
- **UI —ç–ª–µ–º–µ–Ω—Ç—ã**: 2D –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å –∞–ª—å—Ñ–∞-–∫–∞–Ω–∞–ª–æ–º

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### SensorConnector

```cpp
// –ü–æ—Ä—Ç—ã
quint16 tcpPort = 9000;
quint16 udpPort = 9000;

// –î–µ–∫–æ–¥–µ—Ä—ã
TurboJPEGDecoder (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
FFmpegDecoder (fallback)
FastJPEGDecoder (fallback)
```

### LensEngineSDK

```cpp
// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã EKF
double gyroNoise = 0.01;
double accelNoise = 0.1;
double visualNoise = 0.05;
double lidarNoise = 0.02;
```

### ARLauncher

```cpp
// –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –æ–∫–Ω–∞
int width = 1920;
int height = 1080;

// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–º–µ—Ä—ã
float fov = 60.0f;
float aspect = 16.0f / 9.0f;
float nearPlane = 0.01f;
float farPlane = 100.0f;
```

---

**–í—Å–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞.**

